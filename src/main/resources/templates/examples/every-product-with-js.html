<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="UTF-8">
    <title>Every Product</title>
<!--    <script src="js/every-product.js"></script>-->
</head>
<body>

<a href="/product">Go back to create product</a>
<a href="/">Home</a>

<h1>Every product</h1>

<div id="content"></div>

<!--This is task4 where you loop through each item and insert into the dom-->
<script>
    function fetchData(){
        console.log("1. fetchData")
        // this will eventually be an endpoint from Spring Boot
        fetch('/product/all')
            .then((resp) => resp.json())
            .then(function(data) {
                console.log("2. receive data")
                console.log(data);
                //replace the next loop with your actual insert to DOM code
                for(i = 0; i < data.length; i++){
                    document.getElementById("content").innerHTML +=  i + ". " + data[i]["title"] +" - "+ data[i]["price"] +" - "+ data[i]["description"] + "<br>";
                }
            })
            .catch(function(error) {
                console.log(error);
            });
    }

    window.onload = () => {
        fetchData()
    }
</script>
</body>
</html>